# feishu-openclaw (æ¡¥æ¥)
é£ä¹¦ Ã— AI åŠ©æ‰‹ **ç‹¬ç«‹æ¡¥æ¥å™¨** â€” æ— éœ€å…¬ç½‘æœåŠ¡å™¨
Feishu Ã— AI Assistant **standalone bridge** â€” no public server required

---

> ### ğŸš€ æ–°é¡¹ç›®ï¼š[OpenCrew](https://github.com/AlexAnys/opencrew) â€” æŠŠä½ çš„ OpenClaw å˜æˆä¸€æ”¯ AI å›¢é˜Ÿ
>
> ä¸€ä¸ª Agent æ‰¿æ‹…æ‰€æœ‰äº‹æƒ…æ—¶ï¼Œä¸Šä¸‹æ–‡ä¼šè†¨èƒ€ã€ç»éªŒä¼šä¸¢å¤±ã€ä½ ä¼šå˜æˆç“¶é¢ˆã€‚
>
> **OpenCrew çš„è§£æ³•**ï¼šå¤šä¸ª Agent å„ç®¡å„çš„é¢†åŸŸï¼ŒSlack é¢‘é“=å²—ä½ï¼Œç»éªŒè‡ªåŠ¨æ²‰æ·€ï¼Œå¯é€†æ“ä½œæ— éœ€ä½ ç¡®è®¤ã€‚
>
> 3 ä¸ª Agent èµ·æ­¥ Â· 10 åˆ†é’Ÿéƒ¨ç½² Â· ä¸ç”¨å†™ä»£ç  Â· ä¸å½±å“ä½ ç°æœ‰çš„ OpenClaw
>
> **[æŸ¥çœ‹ GitHub â†’](https://github.com/AlexAnys/opencrew)**

---

## ä½ åº”è¯¥ç”¨å“ªä¸ªï¼Ÿï¼ˆæ’ä»¶ vs ç‹¬ç«‹æ¡¥æ¥ï¼‰

- æƒ³è¦**æœ€çœäº‹ã€ä¸€é”®å®‰è£…**ï¼šç”¨æ’ä»¶ç‰ˆï¼ˆOpenClaw/Clawdbotï¼‰â†’ <https://github.com/AlexAnys/openclaw-feishu>
- æƒ³è¦**åª’ä½“æœ€ç¨³ï¼ˆæ”¶å›¾/æ”¶è§†é¢‘/ç”Ÿå›¾å›ä¼ ï¼‰ã€å¹¶ä¸”å’Œ Gateway è¿›ç¨‹éš”ç¦»**ï¼šç”¨æœ¬ä»“åº“ï¼ˆç‹¬ç«‹æ¡¥æ¥ï¼‰

> å»ºè®®ï¼šå…ˆç”¨æ’ä»¶è·‘é€šï¼Œå†æŒ‰éœ€æ±‚å‡çº§åˆ°æ¡¥æ¥ï¼›æˆ–è€…ç›´æ¥ç”¨æ¡¥æ¥ï¼ˆæ›´ç¨³ï¼Œä½†éœ€è¦ä½ è‡ªå·±ç»´æŠ¤ä¸€ä¸ªè¿›ç¨‹/æœåŠ¡ï¼‰ã€‚

## ğŸ”¥ 2026.02.02 é‡ç£…æ›´æ–°ï¼ˆå¼ºçƒˆå»ºè®®æ‰€æœ‰æ—§ç‰ˆæœ¬å‡çº§ï¼‰

è¿™æ¬¡æ›´æ–°è§£å†³äº†â€œèƒ½èŠå¤©ä½†åª’ä½“ä¸é€šâ€çš„æ‰€æœ‰ç›¸å…³ç—›ç‚¹ï¼š

- âœ… **é£ä¹¦ä¼ é€å›¾ç‰‡ â†’ AI çœŸæ­£èƒ½çœ‹å›¾**ï¼ˆè‡ªåŠ¨æ ¹æ® `image_key` ä¸‹è½½å¹¶ä»¥å›¾ç‰‡é™„ä»¶å–‚ç»™æ¨¡å‹ï¼‰
- âœ… **é£ä¹¦ä¼ é€è§†é¢‘/æ–‡ä»¶ â†’ æ¡¥æ¥å¯æ¥æ”¶å¹¶ä¸‹è½½**ï¼ˆä¼šæŠŠæœ¬åœ° `file://...` è·¯å¾„ä¼ ç»™ AIï¼›å¤§æ–‡ä»¶å—å¤§å°é™åˆ¶ï¼‰
- âœ… **AI ç”Ÿæˆå›¾ç‰‡ â†’ è‡ªåŠ¨å›ä¼ é£ä¹¦**ï¼ˆæ”¯æŒå·¥å…·è¿”å›çš„ `mediaUrl(s)` + `MEDIA:` æ–‡æœ¬è¡Œ + ä¸´æ—¶ç›®å½•æ–‡ä»¶ï¼‰
- âœ… **åˆ—è¡¨æ ¼å¼ä¿®å¤**ï¼šé£ä¹¦å¶å‘æŠŠ `- 1` æ‹†æˆ `-\n1` çš„æƒ…å†µï¼Œä¼šè‡ªåŠ¨åˆå¹¶å› `- 1`
- âœ… **æ›´å®‰å…¨çš„æœ¬åœ°æ–‡ä»¶å‘é€ç™½åå•**ï¼šé»˜è®¤ä»…å…è®¸ `~/.clawdbot/media`ã€ç³»ç»Ÿä¸´æ—¶ç›®å½•ã€`/tmp`
- âœ… æ›´å¼ºçš„è°ƒè¯•èƒ½åŠ›ï¼š`FEISHU_BRIDGE_DEBUG=1` å¯æ‰“å°ä¸‹è½½/è½¬å‘ç»†èŠ‚

### ä»æ—§ç‰ˆæœ¬å‡çº§ï¼ˆé€æ­¥å¼•å¯¼ï¼‰

> å‡è®¾ä½ ä¹‹å‰å·²ç»æŒ‰æœ¬ README è·‘é€šè¿‡ï¼Œå¹¶ä¸”ç°åœ¨æ¡¥æ¥æ˜¯â€œå¼€æœºè‡ªå¯ï¼ˆlaunchdï¼‰â€åœ¨åå°è¿è¡Œã€‚

1) **æ‰“å¼€â€œç»ˆç«¯ Terminalâ€**

2) **è¿›å…¥ä½ ä¹‹å‰å…‹éš†æœ¬é¡¹ç›®çš„ç›®å½•**

- ä¸çŸ¥é“ç›®å½•åœ¨å“ªï¼šå…ˆåœ¨ç”µè„‘é‡Œæœç´¢ `feishu-openclaw` æ–‡ä»¶å¤¹
- å°æŠ€å·§ï¼šåœ¨ Finder é‡Œæ‰¾åˆ°è¯¥æ–‡ä»¶å¤¹åï¼ŒæŠŠæ–‡ä»¶å¤¹**æ‹–è¿›ç»ˆç«¯**ï¼Œå°±èƒ½ç›´æ¥å¾—åˆ°è·¯å¾„

3) **åœæ­¢æ—§çš„æ¡¥æ¥æœåŠ¡ï¼ˆé¿å…æ—§è¿›ç¨‹ç»§ç»­è·‘æ—§ä»£ç ï¼‰**

> å¦‚æœä½ å½“åˆæ²¡æœ‰åšâ€œå¼€æœºè‡ªå¯ï¼ˆlaunchdï¼‰â€ï¼Œè€Œæ˜¯æ‰‹åŠ¨åœ¨ç»ˆç«¯è¿è¡Œçš„ `node bridge.mjs`ï¼š
> ä½ å¯ä»¥è·³è¿‡è¿™ä¸€æ­¥ï¼ˆæˆ–è€…ç›´æ¥åœ¨æ—§ç»ˆç«¯çª—å£æŒ‰ `Ctrl + C` åœæ­¢ï¼‰ã€‚

```bash
launchctl unload ~/Library/LaunchAgents/com.clawdbot.feishu-bridge.plist 2>/dev/null || true
```

4) **æ‹‰å–æœ€æ–°ä»£ç **

```bash
cd /path/to/feishu-openclaw
git pull
```

5) **æ›´æ–°ä¾èµ–**ï¼ˆå»ºè®®ç…§åšï¼‰

```bash
npm install
```

6) **é‡æ–°å¯åŠ¨æ¡¥æ¥æœåŠ¡**

- å¦‚æœä½ ä½¿ç”¨äº† launchdï¼ˆå¼€æœºè‡ªå¯ï¼‰ï¼š

```bash
launchctl load ~/Library/LaunchAgents/com.clawdbot.feishu-bridge.plist
```

- å¦‚æœä½ æ˜¯æ‰‹åŠ¨è¿è¡Œï¼š

```bash
FEISHU_APP_ID=cli_xxxxxxxxx node bridge.mjs
```

7) **éªŒè¯æ˜¯å¦æˆåŠŸ**

- åœ¨é£ä¹¦é‡Œå‘ä¸€å¼ å›¾ç‰‡ç»™æœºå™¨äººï¼ˆå®ƒåº”è¯¥èƒ½çœ‹æ‡‚å›¾ç‰‡å†…å®¹ï¼‰
- è®©æœºå™¨äººâ€œç”Ÿæˆä¸€å¼ å›¾ç‰‡â€ï¼ˆå®ƒåº”è¯¥ä¼šæŠŠå›¾ç‰‡å‘å›é£ä¹¦ï¼‰

å¦‚æœä¸å·¥ä½œï¼Œå…ˆå¼€è°ƒè¯•æ¨¡å¼è¿è¡Œä¸€æ¬¡ï¼ˆè§ä¸‹æ–¹â€œè°ƒè¯•â€ç« èŠ‚ï¼‰ã€‚


## **ğŸ†• 2025.2.1**ï¼šåŒæ­¥æ›´æ–°é£ä¹¦æ’ä»¶=> [openclaw-feishu](https://github.com/AlexAnys/openclaw-feishu)ï¼Œé€‚é…OpenClaw
---

## ğŸ“¦ å®‰è£…æ–¹å¼ / Install Methods

| æ–¹å¼ | è¯´æ˜ | é“¾æ¥ |
|------|------|------|
| **â‘  ä¸€é”®å®‰è£…** | è®© Clawdbot å¸®ä½ å®‰è£…æ’ä»¶ | [openclaw-feishu](https://github.com/AlexAnys/openclaw-feishu) |
| **â‘¡ npm å‘½ä»¤** | `clawdbot plugins install feishu-openclaw` | [npm](https://www.npmjs.com/package/feishu-openclaw) |
| **â‘¢ ç‹¬ç«‹æ¡¥æ¥** â¬…ï¸ | æœ¬é¡¹ç›®ï¼Œç‹¬ç«‹è¿›ç¨‹ | è§ä¸‹æ–¹ |

### æ’ä»¶ vs æ¡¥æ¥

| | æ’ä»¶ (â‘ â‘¡) | æ¡¥æ¥ (â‘¢) |
|---|---|---|
| è¿›ç¨‹ | 1 ä¸ªï¼ˆå†…ç½® Gatewayï¼‰ | 2 ä¸ªï¼ˆç‹¬ç«‹ï¼‰ |
| å´©æºƒ | å½±å“ Gateway | **äº’ä¸å½±å“** |
| é€‚åˆ | æ—¥å¸¸ä½¿ç”¨ | **ç”Ÿäº§/éš”ç¦»éƒ¨ç½²** |

**æ¨è**ï¼šæ—¥å¸¸ç”¨æ’ä»¶ï¼Œç”Ÿäº§ç¯å¢ƒç”¨æ¡¥æ¥ã€‚
---
## å®ƒæ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ

æƒ³è±¡ä¸‰ä¸ªè§’è‰²ï¼š

```
é£ä¹¦ç”¨æˆ· â†â†’ é£ä¹¦äº‘ç«¯ â†â†’ æ¡¥æ¥è„šæœ¬ï¼ˆä½ çš„ç”µè„‘ä¸Šï¼‰ â†â†’ Clawdbot æ™ºèƒ½ä½“
```

### é€šä¿—è§£é‡Š

1. **é£ä¹¦é‚£è¾¹**ï¼šä½ åœ¨é£ä¹¦å¼€å‘è€…åå°åˆ›å»ºä¸€ä¸ª"è‡ªå»ºåº”ç”¨"ï¼ˆæœºå™¨äººï¼‰ï¼Œé£ä¹¦ä¼šç»™ä½ ä¸€ä¸ª App ID å’Œ App Secretâ€”â€”è¿™å°±åƒæ˜¯æœºå™¨äººçš„"èº«ä»½è¯"ã€‚

2. **æ¡¥æ¥è„šæœ¬**ï¼šä¸€ä¸ªè¿è¡Œåœ¨ä½ ç”µè„‘ä¸Šçš„å°ç¨‹åºã€‚å®ƒç”¨é£ä¹¦æä¾›çš„ **WebSocket é•¿è¿æ¥**ï¼ˆè€Œä¸æ˜¯ä¼ ç»Ÿçš„ Webhookï¼‰æ¥æ¥æ”¶æ¶ˆæ¯â€”â€”è¿™æ„å‘³ç€ï¼š
   - âœ… ä¸éœ€è¦å…¬ç½‘ IP / åŸŸå
   - âœ… ä¸éœ€è¦ ngrok / frp ç­‰å†…ç½‘ç©¿é€
   - âœ… ä¸éœ€è¦ HTTPS è¯ä¹¦
   - å°±åƒå¾®ä¿¡ä¸€æ ·ï¼Œä½ çš„å®¢æˆ·ç«¯ä¸»åŠ¨è¿ä¸Šå»ï¼Œæ¶ˆæ¯å°±æ¨è¿‡æ¥äº†

3. **Clawdbot**ï¼šæ¡¥æ¥è„šæœ¬æ”¶åˆ°é£ä¹¦æ¶ˆæ¯åï¼Œé€šè¿‡æœ¬åœ° WebSocket è½¬å‘ç»™ Clawdbot Gatewayã€‚Clawdbot è°ƒç”¨ AI æ¨¡å‹ç”Ÿæˆå›å¤ï¼Œæ¡¥æ¥è„šæœ¬å†æŠŠå›å¤å‘å›é£ä¹¦ã€‚

### ä¿æ´»æœºåˆ¶

è„šæœ¬é€šè¿‡ macOS çš„ **launchd**ï¼ˆç³»ç»ŸæœåŠ¡ç®¡ç†å™¨ï¼‰è¿è¡Œï¼š
- å¼€æœºè‡ªåŠ¨å¯åŠ¨
- å´©æºƒè‡ªåŠ¨é‡å¯
- æ—¥å¿—è‡ªåŠ¨å†™å…¥æ–‡ä»¶

å°±åƒæŠŠä¸€ä¸ªç¨‹åºè®¾æˆäº†"å¼€æœºå¯åŠ¨é¡¹"ï¼Œä½†æ›´å¯é ã€‚

---

## 5 åˆ†é’Ÿä¸Šæ‰‹

### å‰æ

- macOSï¼ˆå·²å®‰è£… Clawdbot å¹¶æ­£å¸¸è¿è¡Œï¼‰
- Node.js â‰¥ 18
- Clawdbot Gateway å·²å¯åŠ¨ï¼ˆ`clawdbot gateway status` æ£€æŸ¥ï¼‰
- æ¡¥æ¥è„šæœ¬éœ€ä¸ Gateway åœ¨åŒä¸€å°æœºå™¨ï¼ˆé»˜è®¤è¿æ¥ `127.0.0.1`ï¼‰

### ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºé£ä¹¦æœºå™¨äºº

1. æ‰“å¼€ [é£ä¹¦å¼€æ”¾å¹³å°](https://open.feishu.cn/app)ï¼Œç™»å½•
2. ç‚¹å‡» **åˆ›å»ºè‡ªå»ºåº”ç”¨**
3. å¡«å†™åº”ç”¨åç§°ï¼ˆéšæ„ï¼Œæ¯”å¦‚ "My AI Assistant"ï¼‰
4. è¿›å…¥åº”ç”¨ â†’ **æ·»åŠ åº”ç”¨èƒ½åŠ›** â†’ é€‰æ‹© **æœºå™¨äºº**
5. è¿›å…¥ **æƒé™ç®¡ç†**ï¼Œå¼€é€šä»¥ä¸‹æƒé™ï¼ˆæ¨èç…§æŠ„ï¼Œå°‘è¸©å‘ï¼‰ï¼š
   - `im:message` â€” è·å–ä¸å‘é€æ¶ˆæ¯
   - `im:message:send_as_bot` â€” ä»¥æœºå™¨äººèº«ä»½å‘æ¶ˆæ¯ï¼ˆé¿å… 403ï¼‰
   - `im:message.group_at_msg` â€” æ¥æ”¶ç¾¤èŠä¸­ @ æœºå™¨äººçš„æ¶ˆæ¯
   - `im:message.p2p_msg` â€” æ¥æ”¶æœºå™¨äººå•èŠæ¶ˆæ¯
   - `im:resource` â€” ä¸Šä¼ /ä¸‹è½½å›¾ç‰‡ä¸æ–‡ä»¶ï¼ˆ**æ”¶å›¾/æ”¶è§†é¢‘**å¿…é¡»ï¼‰
6. è¿›å…¥ **äº‹ä»¶ä¸å›è°ƒ** â†’ **äº‹ä»¶é…ç½®**ï¼š
   - æ·»åŠ äº‹ä»¶ï¼š`æ¥æ”¶æ¶ˆæ¯ im.message.receive_v1`
   - è¯·æ±‚æ–¹å¼é€‰æ‹©ï¼š**ä½¿ç”¨é•¿è¿æ¥æ¥æ”¶äº‹ä»¶**ï¼ˆè¿™æ˜¯å…³é”®ï¼ï¼‰
7. å‘å¸ƒåº”ç”¨ï¼ˆåˆ›å»ºç‰ˆæœ¬ â†’ ç”³è¯·ä¸Šçº¿ï¼‰
8. è®°ä¸‹ **App ID** å’Œ **App Secret**ï¼ˆåœ¨"å‡­è¯ä¸åŸºç¡€ä¿¡æ¯"é¡µé¢ï¼‰

### ç¬¬äºŒæ­¥ï¼šå®‰è£…ä¾èµ–

```bash
cd /path/to/feishu-openclaw
npm install
```

### ç¬¬ä¸‰æ­¥ï¼šé…ç½®å‡­è¯

æŠŠä½ çš„é£ä¹¦ App Secret ä¿å­˜åˆ°å®‰å…¨ä½ç½®ï¼š

```bash
# åˆ›å»º secrets ç›®å½•
mkdir -p ~/.clawdbot/secrets

# å†™å…¥ secretï¼ˆæ›¿æ¢æˆä½ è‡ªå·±çš„ï¼‰
echo "ä½ çš„AppSecret" > ~/.clawdbot/secrets/feishu_app_secret

# è®¾ç½®æƒé™ï¼Œåªæœ‰è‡ªå·±èƒ½è¯»
chmod 600 ~/.clawdbot/secrets/feishu_app_secret
```

> å¦‚éœ€è‡ªå®šä¹‰è·¯å¾„ï¼Œå¯è®¾ç½® `FEISHU_APP_SECRET_PATH` æŒ‡å‘è¯¥æ–‡ä»¶ã€‚

### ç¬¬å››æ­¥ï¼šæµ‹è¯•è¿è¡Œ

```bash
# æ›¿æ¢æˆä½ çš„ App ID
FEISHU_APP_ID=cli_xxxxxxxxx node bridge.mjs
```

è¯¥æ¡¥æ¥å…¼å®¹ Clawdbot / OpenClaw Gatewayã€‚

åœ¨é£ä¹¦é‡Œç»™æœºå™¨äººå‘ä¸€æ¡æ¶ˆæ¯ï¼Œçœ‹åˆ°å›å¤å°±è¯´æ˜æˆåŠŸäº† ğŸ‰

### ç¬¬äº”æ­¥ï¼šè®¾ç½®å¼€æœºè‡ªå¯ï¼ˆå¯é€‰ä½†æ¨èï¼‰

```bash
# ç”Ÿæˆ launchd æœåŠ¡é…ç½®ï¼ˆè‡ªåŠ¨æ£€æµ‹è·¯å¾„ï¼‰
node setup-service.mjs

# åŠ è½½æœåŠ¡
launchctl load ~/Library/LaunchAgents/com.clawdbot.feishu-bridge.plist

# æŸ¥çœ‹çŠ¶æ€
launchctl list | grep feishu
```

ä¹‹åç”µè„‘é‡å¯ä¹Ÿä¼šè‡ªåŠ¨è¿ä¸Šã€‚

---

## æ–‡ä»¶è¯´æ˜

```
feishu-openclaw/
â”œâ”€â”€ bridge.mjs           # æ ¸å¿ƒæ¡¥æ¥è„šæœ¬
â”œâ”€â”€ setup-service.mjs    # è‡ªåŠ¨ç”Ÿæˆ launchd ä¿æ´»é…ç½®
â”œâ”€â”€ package.json         # ä¾èµ–å£°æ˜
â””â”€â”€ README.md            # ä½ æ­£åœ¨è¯»çš„è¿™ä¸ª
```

---

## è¿›é˜¶

### ç¾¤èŠè¡Œä¸º

åœ¨ç¾¤èŠä¸­ï¼Œæ¡¥æ¥å™¨é»˜è®¤"ä½æ‰“æ‰°"æ¨¡å¼â€”â€”åªåœ¨ä»¥ä¸‹æƒ…å†µå›å¤ï¼š
- è¢« @ äº†
- æ¶ˆæ¯çœ‹èµ·æ¥æ˜¯æé—®ï¼ˆä»¥ `?` / `ï¼Ÿ` ç»“å°¾ï¼‰
- æ¶ˆæ¯åŒ…å«è¯·æ±‚ç±»åŠ¨è¯ï¼ˆå¸®ã€è¯·ã€åˆ†æã€æ€»ç»“ã€å†™â€¦ï¼‰
- ç”¨åå­—å‘¼å”¤ï¼ˆbotã€åŠ©æ‰‹â€¦ï¼Œå¯åœ¨ä»£ç ä¸­è‡ªå®šä¹‰ï¼‰

å…¶ä»–é—²èŠä¸ä¼šå›å¤ï¼Œé¿å…åˆ·å±ã€‚

### "æ­£åœ¨æ€è€ƒâ€¦" æç¤º

å¦‚æœ AI å›å¤è¶…è¿‡ 2.5 ç§’ï¼Œä¼šå…ˆå‘ä¸€æ¡"æ­£åœ¨æ€è€ƒâ€¦"ï¼Œç­‰å›å¤ç”Ÿæˆåè‡ªåŠ¨æ›¿æ¢æˆå®Œæ•´å†…å®¹ã€‚

### æ—¥å¿—ä½ç½®

```
~/.clawdbot/logs/feishu-bridge.out.log   # æ­£å¸¸è¾“å‡º
~/.clawdbot/logs/feishu-bridge.err.log   # é”™è¯¯æ—¥å¿—
```

### è°ƒè¯•ï¼ˆæ¨èï¼‰

å¦‚æœä½ é‡åˆ°â€œå›¾ç‰‡å‘ä¸è¿‡æ¥ / ç”Ÿå›¾å‘ä¸å‡ºæ¥ / åªçœ‹åˆ° key / åªæ”¶åˆ°æ–‡å­—â€ç­‰é—®é¢˜ï¼š

1) åœ¨æœ¬é¡¹ç›®ç›®å½•æ–°å»ºæˆ–ç¼–è¾‘ `.env`ï¼ˆæ³¨æ„ï¼š`.env` ä¸ä¼šä¸Šä¼ åˆ° GitHubï¼Œå¾ˆå®‰å…¨ï¼‰

```bash
FEISHU_BRIDGE_DEBUG=1
```

2) é‡å¯æ¡¥æ¥æœåŠ¡ï¼ˆlaunchdï¼‰ï¼š

```bash
launchctl unload ~/Library/LaunchAgents/com.clawdbot.feishu-bridge.plist
launchctl load ~/Library/LaunchAgents/com.clawdbot.feishu-bridge.plist
```

3) æŸ¥çœ‹æ—¥å¿—ï¼š

```bash
tail -n 200 ~/.clawdbot/logs/feishu-bridge.err.log
```

---

## æ’æŸ¥æ¸…å•ï¼ˆé‡åˆ°é—®é¢˜å…ˆçœ‹è¿™é‡Œï¼‰

### 1) èƒ½å‘æ¶ˆæ¯ï¼Œä½†æ”¶ä¸åˆ°æ¶ˆæ¯

- é£ä¹¦å¼€æ”¾å¹³å° â†’ **äº‹ä»¶ä¸å›è°ƒ**ï¼šè®¢é˜…æ–¹å¼æ˜¯å¦é€‰äº† **â€œä½¿ç”¨é•¿è¿æ¥æ¥æ”¶äº‹ä»¶â€**ï¼Ÿ
- æ˜¯å¦æ·»åŠ äº†äº‹ä»¶ï¼š`im.message.receive_v1`ï¼Ÿ
- åº”ç”¨æ˜¯å¦å·²å‘å¸ƒï¼ˆè‡³å°‘æµ‹è¯•ç‰ˆå‘å¸ƒï¼‰ï¼Ÿ
- æœºå™¨äººæ˜¯å¦å·²æ·»åŠ åˆ°å¯¹åº”ç¾¤èŠ/å¯ç”¨èŒƒå›´ï¼Ÿ

### 2) ä½ å‘å›¾ç‰‡/è§†é¢‘ï¼ŒAI çœ‹ä¸åˆ°ï¼ˆåªçœ‹åˆ° key / [å›¾ç‰‡]ï¼‰

- æƒé™æ˜¯å¦å¼€äº† `im:resource`ï¼ˆåª’ä½“èµ„æºæƒé™ï¼‰ï¼Ÿ
- æ‰“å¼€è°ƒè¯•ï¼šåœ¨ `.env` é‡Œè®¾ `FEISHU_BRIDGE_DEBUG=1`ï¼Œç„¶åçœ‹æ—¥å¿—ï¼š
  - `~/.clawdbot/logs/feishu-bridge.err.log`

### 3) AI è¯´â€œç”Ÿæˆäº†å›¾ç‰‡â€ï¼Œä½†é£ä¹¦æ”¶ä¸åˆ°å›¾ç‰‡

é€šå¸¸æ˜¯ä¸¤ç±»åŸå› ï¼š
- ç”Ÿæˆçš„å›¾ç‰‡è·¯å¾„ä¸åœ¨å…è®¸å‘é€çš„ç™½åå•ç›®å½•é‡Œï¼ˆé»˜è®¤åªå…è®¸ `~/.clawdbot/media`ã€ç³»ç»Ÿä¸´æ—¶ç›®å½•ã€`/tmp`ï¼‰
- å›¾ç‰‡æ–‡ä»¶å¤ªå¤§æˆ–ä¸å¯è¯»

ä¹Ÿå»ºè®®å…ˆå¼€è°ƒè¯•ï¼Œçœ‹æ—¥å¿—å®šä½ã€‚

### 4) è§†é¢‘/æ–‡ä»¶èƒ½æ”¶åˆ°ï¼Œä½† AI â€œç†è§£å†…å®¹â€æœ‰é™

- ç›®å‰æ¡¥æ¥ä¼šä¸‹è½½è§†é¢‘/æ–‡ä»¶ï¼Œå¹¶æŠŠ `file://...` è·¯å¾„ä¼ ç»™ AIã€‚
- ä½† AI æ˜¯å¦èƒ½â€œè¯»æ‡‚â€æ–‡ä»¶å†…å®¹ï¼Œå–å†³äºä½ ä½¿ç”¨çš„ agent/å·¥å…·é“¾æ˜¯å¦ä¼šå»è¯»å–è¯¥æ–‡ä»¶ã€‚

> å¦‚æœä½ å¸Œæœ›è‡ªåŠ¨è§£æ PDF/Word/Excel å¹¶æŠŠå†…å®¹è½¬æˆæ–‡æœ¬å–‚ç»™ AIï¼Œéœ€è¦é¢å¤–æ‰©å±•ï¼ˆæ¬¢è¿æ issueï¼‰ã€‚

### 5) å‡çº§åˆ° OpenClaw 2026.2.x åæŠ¥ "missing scope: operator.write"

è¿™æ˜¯å› ä¸ºæ–°ç‰ˆ OpenClaw å¼•å…¥äº† Device Identity è®¤è¯æœºåˆ¶ã€‚**è§£å†³æ–¹æ³•ï¼šå‡çº§æ¡¥æ¥åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚**

```bash
cd /path/to/feishu-openclaw
git pull
npm install
# é‡å¯æœåŠ¡
launchctl unload ~/Library/LaunchAgents/com.clawdbot.feishu-bridge.plist
launchctl load ~/Library/LaunchAgents/com.clawdbot.feishu-bridge.plist
```

å‡çº§åæ¡¥æ¥ä¼šè‡ªåŠ¨ç”Ÿæˆè®¾å¤‡å¯†é’¥å¹¶å®Œæˆè®¤è¯ï¼Œæ— éœ€é¢å¤–æ“ä½œã€‚

## å¸¸è§æ­§ä¹‰ä¸é…ç½®è¯´æ˜

### 1) Clawdbot é…ç½®è·¯å¾„

é»˜è®¤è¯»å–ï¼š`~/.clawdbot/clawdbot.json`  
å¦‚æœä½ æŠŠ Clawdbot å®‰è£…åœ¨å…¶ä»–ç›®å½•ï¼Œéœ€æ‰‹åŠ¨æŒ‡å®šï¼š

```bash
CLAWDBOT_CONFIG_PATH=/your/path/clawdbot.json FEISHU_APP_ID=cli_xxx node bridge.mjs
```

### 2) é€‰æ‹© Clawdbot çš„ Agent

é»˜è®¤ä½¿ç”¨ `main`ï¼Œå¦‚éœ€åˆ‡æ¢ï¼š

```bash
CLAWDBOT_AGENT_ID=ä½ çš„AgentID FEISHU_APP_ID=cli_xxx node bridge.mjs
```

### 3) Gateway å¿…é¡»åœ¨æœ¬æœº

æ¡¥æ¥å™¨å›ºå®šè¿æ¥ `127.0.0.1`ï¼Œæ‰€ä»¥æ¡¥æ¥è„šæœ¬å¿…é¡»ä¸ Gateway åœ¨åŒä¸€å°æœºå™¨ã€‚  
å¦‚æœä½ æƒ³è·¨æœºå™¨éƒ¨ç½²ï¼Œéœ€è¦è‡ªè¡Œæ”¹ä»£ç æˆ–åŠ ä¸€å±‚è½¬å‘ã€‚

### åœæ­¢æœåŠ¡

```bash
launchctl unload ~/Library/LaunchAgents/com.clawdbot.feishu-bridge.plist
```

---

## ç‰ˆæœ¬ä¸æ›´æ–°ï¼ˆReleasesï¼‰

- æ¨èä» GitHub çš„ **Releases** è·å–â€œç¨³å®šç‰ˆæœ¬â€çš„æ›´æ–°è¯´æ˜ä¸å‡çº§æŒ‡å¼•ï¼š
  <https://github.com/AlexAnys/feishu-openclaw/releases>
- å¦‚æœä½ æ˜¯é€šè¿‡ `git clone` å®‰è£…çš„ï¼šå‡çº§åŸºæœ¬å°±æ˜¯ `git pull` + `npm install` + é‡å¯æœåŠ¡ã€‚

## å¸¸è§é—®é¢˜

**Q: éœ€è¦æœåŠ¡å™¨å—ï¼Ÿ**
ä¸éœ€è¦ã€‚é£ä¹¦çš„ WebSocket é•¿è¿æ¥æ¨¡å¼è®©ä½ çš„ç”µè„‘ç›´æ¥è¿åˆ°é£ä¹¦äº‘ç«¯ï¼Œä¸éœ€è¦å…¬ç½‘æš´éœ²ã€‚

**Q: ç”µè„‘å…³æœºäº†æ€ä¹ˆåŠï¼Ÿ**
æœºå™¨äººä¼šç¦»çº¿ã€‚é‡æ–°å¼€æœºå launchd ä¼šè‡ªåŠ¨é‡å¯æ¡¥æ¥æœåŠ¡ã€‚å¦‚éœ€ 24/7 åœ¨çº¿ï¼Œå¯ä»¥éƒ¨ç½²åˆ°ä¸€å°å¸¸å¼€çš„æœºå™¨ï¼ˆæ¯”å¦‚ NASã€äº‘æœåŠ¡å™¨ã€ç”šè‡³æ ‘è“æ´¾ï¼‰ã€‚

**Q: é£ä¹¦å…è´¹ç‰ˆèƒ½ç”¨å—ï¼Ÿ**
å¯ä»¥ã€‚è‡ªå»ºåº”ç”¨å’Œæœºå™¨äººèƒ½åŠ›å¯¹æ‰€æœ‰é£ä¹¦ç‰ˆæœ¬å¼€æ”¾ã€‚

**Q: èƒ½åŒæ—¶æ¥ Telegram å—ï¼Ÿ**
å¯ä»¥ã€‚Clawdbot åŸç”Ÿæ”¯æŒ Telegram ç­‰æ¸ é“ï¼Œé£ä¹¦æ¡¥æ¥åªæ˜¯å¤šåŠ ä¸€ä¸ªå…¥å£ï¼Œäº’ä¸å½±å“ã€‚

---

## ğŸŒ Larkï¼ˆå›½é™…ç‰ˆï¼‰æ¥å…¥æŒ‡å—

> é£ä¹¦å›½é™…ç‰ˆï¼ˆLarkï¼‰ä¸æ”¯æŒ WebSocket é•¿è¿æ¥ï¼Œéœ€è¦ä½¿ç”¨ **Webhook æ¨¡å¼**ã€‚
> è¿™æ„å‘³ç€ Lark çš„æœåŠ¡å™¨éœ€è¦èƒ½è®¿é—®åˆ°ä½ çš„æ¡¥æ¥æœåŠ¡ã€‚

### ä¸é£ä¹¦ç‰ˆçš„åŒºåˆ«

| | é£ä¹¦ï¼ˆå›½å†…ç‰ˆï¼‰ | Larkï¼ˆå›½é™…ç‰ˆï¼‰ |
|---|---|---|
| è¿æ¥æ–¹å¼ | WebSocket é•¿è¿æ¥ âœ… | **Webhook HTTP å›è°ƒ** |
| éœ€è¦å…¬ç½‘ï¼Ÿ | âŒ ä¸éœ€è¦ | âœ… éœ€è¦ï¼ˆæˆ–ç”¨éš§é“ï¼‰ |
| å¼€å‘è€…å¹³å° | [open.feishu.cn](https://open.feishu.cn) | [open.larksuite.com](https://open.larksuite.com) |

### ç¬¬ä¸€æ­¥ï¼šé…ç½®ç¯å¢ƒå˜é‡

åœ¨ `.env` æ–‡ä»¶ä¸­æ·»åŠ ï¼š

```env
FEISHU_DOMAIN=lark
FEISHU_CONNECTION_MODE=webhook
FEISHU_WEBHOOK_PORT=3000
FEISHU_WEBHOOK_PATH=/feishu/events
```

### ç¬¬äºŒæ­¥ï¼šæš´éœ²æœ¬åœ°ç«¯å£åˆ°å…¬ç½‘

Lark éœ€è¦èƒ½è®¿é—®åˆ°ä½ çš„ webhook åœ°å€ã€‚æ¨èä½¿ç”¨ **Cloudflare Tunnel**ï¼ˆå…è´¹ã€ç¨³å®šï¼‰ï¼š

```bash
# å®‰è£… cloudflaredï¼ˆmacOSï¼‰
brew install cloudflared

# ä¸€é”®æš´éœ²æœ¬åœ° 3000 ç«¯å£ï¼ˆä¸´æ—¶ï¼Œç”¨äºæµ‹è¯•ï¼‰
cloudflared tunnel --url http://localhost:3000
```

è¿è¡Œåä¼šå¾—åˆ°ä¸€ä¸ªå…¬ç½‘ URLï¼Œç±»ä¼¼ï¼š`https://xxx-yyy-zzz.trycloudflare.com`

> **ä¸ VPN/ä»£ç†å…¼å®¹æ€§**ï¼šCloudflare Tunnel ä¸åˆ›å»ºè™šæ‹Ÿç½‘å¡ï¼Œä¸ä¿®æ”¹ç³»ç»Ÿè·¯ç”±è¡¨ï¼Œä¸ Clash Vergeã€V2Ray ç­‰ä»£ç†å·¥å…·**å®Œå…¨å…¼å®¹**ï¼Œå¯ä»¥åŒæ—¶ä½¿ç”¨ã€‚

å¦‚éœ€å›ºå®šåŸŸåï¼ˆæ¨èæ­£å¼ä½¿ç”¨æ—¶è®¾ç½®ï¼‰ï¼š

```bash
# ç™»å½• Cloudflare
cloudflared tunnel login

# åˆ›å»ºéš§é“
cloudflared tunnel create feishu-bridge

# é…ç½®åŸŸåï¼ˆéœ€è¦åœ¨ Cloudflare DNS æœ‰ä¸€ä¸ªåŸŸåï¼‰
cloudflared tunnel route dns feishu-bridge feishu.yourdomain.com

# å¯åŠ¨éš§é“
cloudflared tunnel run --url http://localhost:3000 feishu-bridge
```

å…¶ä»–éš§é“æ–¹æ¡ˆï¼š
- **ngrok**ï¼š`ngrok http 3000`ï¼ˆå…è´¹ç‰ˆ URL ä¼šå˜ï¼‰
- **Tailscale Funnel**ï¼šå¦‚æœä½ å·²ç»ç”¨ Tailscaleï¼Œé…ç½®æœ€ç®€å•

### ç¬¬ä¸‰æ­¥ï¼šé…ç½® Lark åå°

1. æ‰“å¼€ [Lark Developer Console](https://open.larksuite.com/app)
2. åˆ›å»ºåº”ç”¨ã€æ·»åŠ æœºå™¨äººèƒ½åŠ›ï¼ˆåŒé£ä¹¦ç‰ˆæ­¥éª¤ï¼‰
3. è¿›å…¥ **Event Subscriptions**ï¼š
   - **Request URL** å¡«å…¥ä½ çš„å…¬ç½‘åœ°å€ + webhook è·¯å¾„ï¼Œä¾‹å¦‚ï¼š
     `https://xxx-yyy-zzz.trycloudflare.com/feishu/events`
   - Lark ä¼šå‘é€ä¸€ä¸ªéªŒè¯è¯·æ±‚ï¼Œæ¡¥æ¥æœåŠ¡ä¼šè‡ªåŠ¨å“åº”ï¼ˆéœ€è¦å…ˆå¯åŠ¨æ¡¥æ¥ï¼‰
4. æ·»åŠ äº‹ä»¶ï¼š`Receive messages - im.message.receive_v1`
5. æƒé™é…ç½®åŒé£ä¹¦ç‰ˆ

### ç¬¬å››æ­¥ï¼šå¯åŠ¨æ¡¥æ¥

```bash
FEISHU_APP_ID=cli_xxxxxxxxx node bridge.mjs
```

å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œä½ ä¼šçœ‹åˆ°ï¼š
```
[OK] Webhook server listening on port 3000, path /feishu/events
```

### æ³¨æ„äº‹é¡¹

- Webhook æ¨¡å¼ä¸‹ï¼Œæ¡¥æ¥è¿›ç¨‹å¿…é¡»æŒç»­è¿è¡Œä¸”å…¬ç½‘å¯è®¿é—®
- å¦‚æœä½¿ç”¨ä¸´æ—¶éš§é“ï¼ˆå¦‚ `cloudflared tunnel --url`ï¼‰ï¼Œæ¯æ¬¡é‡å¯ URL ä¼šå˜ï¼Œéœ€è¦å» Lark åå°æ›´æ–°
- å»ºè®®æ­£å¼ä½¿ç”¨æ—¶é…ç½®å›ºå®šåŸŸåçš„ Cloudflare Tunnel

---

## é“¾æ¥ / Links

- ğŸ“¦ [npm: feishu-openclaw](https://www.npmjs.com/package/feishu-openclaw)
- ğŸ”Œ [GitHub: openclaw-feishu](https://github.com/AlexAnys/openclaw-feishu) (æ’ä»¶)
- ğŸŒ‰ [GitHub: feishu-openclaw](https://github.com/AlexAnys/feishu-openclaw) (æœ¬é¡¹ç›®)
- ğŸ“– [Clawdbot æ–‡æ¡£](https://docs.clawd.bot)

## License

MIT
